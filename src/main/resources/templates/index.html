<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏</title>
    <link rel="stylesheet" th:href="@{/css/index.css}">
</head>
<body>
<div class="container">
    <h1>üéì –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏ –Ω–∞ –∫—É—Ä—Å—ã</h1>

    <div class="header-actions">
        <a href="/requests/new" class="btn btn-primary">‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞—è–≤–∫—É</a>
        <a href="/courses" class="btn btn-primary">üìö –°–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤</a>
        <a href="/operators" class="btn btn-primary">üë• –°–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤</a>
    </div>

    <div th:if="${requests.isEmpty()}" class="empty-message">
        üìù –ó–∞—è–≤–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é!
    </div>

    <table th:if="${!requests.isEmpty()}">
        <thead>
        <tr>
            <th>ID</th>
            <th>–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞</th>
            <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
            <th>–ö—É—Ä—Å</th>
            <th>–¶–µ–Ω–∞</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–û–ø–µ—Ä–∞—Ç–æ—Ä—ã</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="request : ${requests}">
            <td th:text="${request.id}"></td>
            <td th:text="${request.userName}"></td>
            <td th:text="${request.phone}"></td>
            <td th:text="${request.course.name}"></td>
            <td th:text="${request.course.price + ' ‚Ç∏'}"></td>
            <td>
                <span th:if="${request.handled}" class="status-badge status-handled">‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–∞</span>
                <span th:unless="${request.handled}" class="status-badge status-pending">‚è≥ –í –æ–∂–∏–¥–∞–Ω–∏–∏</span>
            </td>
            <td>
                <span th:if="${request.operators.isEmpty()}">-</span>
                <span th:unless="${request.operators.isEmpty()}" th:text="${request.operators.size() + ' –æ–ø–µ—Ä–∞—Ç–æ—Ä(–æ–≤)'}"></span>
            </td>
            <td class="actions">
                <a th:href="@{'/requests/' + ${request.id}}" class="btn btn-success">üëÅÔ∏è –î–µ—Ç–∞–ª–∏</a>
                <a th:if="${!request.handled}" th:href="@{'/requests/' + ${request.id} + '/assign'}" class="btn btn-primary">‚úèÔ∏è –ù–∞–∑–Ω–∞—á–∏—Ç—å</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>
