<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏</title>
    <link rel="stylesheet" th:href="@{/css/request-details.css}">
</head>
<body>
<div class="container">
    <h1>üìã –î–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏ ‚Ññ<span th:text="${request.id}"></span></h1>

    <div class="info-section">
        <div class="info-row">
            <div class="info-label">–ö–ª–∏–µ–Ω—Ç:</div>
            <div class="info-value" th:text="${request.userName}"></div>
        </div>
        <div class="info-row">
            <div class="info-label">–¢–µ–ª–µ—Ñ–æ–Ω:</div>
            <div class="info-value" th:text="${request.phone}"></div>
        </div>
        <div class="info-row">
            <div class="info-label">–ö—É—Ä—Å:</div>
            <div class="info-value" th:text="${request.course.name}"></div>
        </div>
        <div class="info-row">
            <div class="info-label">–¶–µ–Ω–∞ –∫—É—Ä—Å–∞:</div>
            <div class="info-value" th:text="${request.course.price + ' ‚Ç∏'}"></div>
        </div>
        <div class="info-row">
            <div class="info-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</div>
            <div class="info-value" th:text="${request.commentary != null ? request.commentary : '-'}"></div>
        </div>
        <div class="info-row">
            <div class="info-label">–°—Ç–∞—Ç—É—Å:</div>
            <div class="info-value">
                <span th:if="${request.handled}" class="status-badge status-handled">‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–∞</span>
                <span th:unless="${request.handled}" class="status-badge status-pending">‚è≥ –í –æ–∂–∏–¥–∞–Ω–∏–∏</span>
            </div>
        </div>
    </div>

    <h2>üë• –ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã</h2>

    <div class="operators-list">
        <div th:if="${request.operators.isEmpty()}" class="empty-message">
            –û–ø–µ—Ä–∞—Ç–æ—Ä—ã –µ—â–µ –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã
        </div>

        <div th:each="operator : ${request.operators}" class="operator-item">
            <div class="operator-info-detail">
                <div class="operator-name-detail"
                     th:text="${operator.name + ' ' + operator.surname}"></div>
                <div class="operator-dept-detail"
                     th:text="${'–û—Ç–¥–µ–ª: ' + operator.department}"></div>
            </div>
            <form th:action="@{'/requests/' + ${request.id} + '/remove-operator/' + ${operator.id}}"
                  method="post" style="display: inline;">
                <button type="submit" class="btn btn-danger"
                        onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞?')">
                    üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                </button>
            </form>
        </div>
    </div>

    <div class="back-btn">
        <a href="/" class="btn btn-primary">‚¨ÖÔ∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –∑–∞—è–≤–æ–∫</a>
    </div>
</div>
</body>
</html>